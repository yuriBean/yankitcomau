import{c as _,j as e,e as S,K as A,u as L,y as P,P as T,D as B,B as i,z as D,L as I,S as Y}from"./index-90132984.js";import{T as M,a as V,b as h,c as f}from"./tabs-1cd19a03.js";import{C as j,b as $,c as v,a as z,e as W,d as q}from"./card-20bc08aa.js";import{P as c}from"./package-63d15fb6.js";import{A as F}from"./arrow-right-cf1dab7a.js";import{C as R}from"./calendar-a9d8c619.js";import{f as U}from"./index-928e16c7.js";import{p as E}from"./index-ca7fca51.js";import{U as H}from"./user-404ce197.js";import{C as K}from"./credit-card-e15c187e.js";const O=_("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]),Z=A("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function G({className:a,variant:s,...t}){return e.jsx("div",{className:S(Z({variant:s}),a),...t})}const J=({shipment:a})=>{var d,o,m,u,x,g;const s=L(),{session:t}=P(),r=((d=t==null?void 0:t.user)==null?void 0:d.id)===a.shipper_user_id,b=n=>{switch(n){case"pending_payment":return"destructive";case"awaiting_match":return"secondary";case"pending_acceptance":return"secondary";case"active":return"default";case"in_transit":return"default";case"delivered":return"success";case"completed":return"success";case"cancelled":return"outline";default:return"secondary"}},N=n=>{switch(n){case"pending_payment":return"Awaiting Payment";case"awaiting_match":return"Finding a Yanker";case"pending_acceptance":return"Pending Acceptance";case"active":return"Active";case"in_transit":return"In Transit";case"delivered":return"Delivered";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return n}},y=()=>{s(`/payment/shipment/${a.id}`)},w=()=>{s(`/shipment-tracking/${a.id}`)},k=a.origin||((o=a.listing)==null?void 0:o.origin),C=a.destination||((m=a.listing)==null?void 0:m.destination),l=a.departure_date||((u=a.listing)==null?void 0:u.departure_date);return e.jsxs(j,{className:"w-full shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col glassmorphism-alt",children:[e.jsx($,{className:"p-4 bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(v,{className:"text-lg font-bold text-primary dark:text-secondary flex items-center",children:[e.jsx(c,{className:"mr-2 h-5 w-5"}),"Shipment Details"]}),e.jsx(G,{variant:b(a.status),children:N(a.status)})]})}),e.jsxs(z,{className:"p-4 flex-grow space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-base font-semibold",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"mr-2 h-5 w-5 text-muted-foreground"}),e.jsx("span",{children:k||"N/A"})]}),e.jsx(F,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{children:C||"N/A"})})]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[l&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),e.jsxs("span",{children:["Departs on: ",U(E(l),"PPP")]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),e.jsxs("span",{children:["Weight: ",a.agreed_weight_kg," kg"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),e.jsxs("span",{children:["Price: ",a.agreed_price," ",a.currency]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:r?`Yanker: ${((x=a.traveler_profile)==null?void 0:x.full_name)||"Awaiting Match"}`:`Shipper: ${((g=a.sender_profile)==null?void 0:g.full_name)||"N/A"}`})]})]})]}),e.jsx(W,{className:"p-4 bg-slate-50 dark:bg-slate-800/50",children:r&&a.status==="pending_payment"?e.jsxs(i,{onClick:y,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Pay Now"]}):e.jsx(i,{onClick:w,className:"w-full",children:"Track Shipment"})})]})},p=({shipments:a,type:s,isLoading:t})=>t?e.jsxs("div",{className:"text-center py-10 flex flex-col items-center justify-center",children:[e.jsx(D,{size:"lg"}),e.jsx("p",{className:"text-muted-foreground dark:text-slate-300 mt-4",children:"Loading shipments..."})]}):!a||a.length===0?e.jsxs(j,{className:"text-center p-8 shadow-lg glassmorphism border-none dark:bg-slate-800/40",children:[e.jsx(c,{size:48,className:"mx-auto mb-4 text-primary"}),e.jsx(v,{className:"text-xl font-semibold text-foreground dark:text-white",children:s==="sent"?"No Sent Bags":"Not Carrying Any Bags"}),e.jsx(q,{className:"text-muted-foreground dark:text-slate-300 mt-2 mb-4",children:s==="sent"?"You haven't sent any bags yet.":"You are not currently carrying any bags for others."}),e.jsx(I,{to:s==="sent"?"/send-a-bag":"/list-your-bag",children:e.jsx(i,{className:"bg-gradient-to-r from-primary to-purple-600 text-white",children:s==="sent"?"Send a Bag":"List Your Bag"})})]}):e.jsx("div",{className:"space-y-4",children:a.map(r=>e.jsx(J,{shipment:r},r.id))}),le=({sentShipments:a,carryingShipments:s,isLoadingSent:t,isLoadingCarrying:r})=>e.jsxs(M,{defaultValue:"sent",className:"w-full",children:[e.jsxs(V,{className:"grid w-full grid-cols-2 md:max-w-md mx-auto bg-slate-200 dark:bg-slate-700/50 shadow-inner",children:[e.jsxs(h,{value:"sent",className:"data-[state=active]:bg-primary data-[state=active]:text-white dark:data-[state=active]:bg-blue-600",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"})," Bags I've Sent"]}),e.jsxs(h,{value:"carrying",className:"data-[state=active]:bg-primary data-[state=active]:text-white dark:data-[state=active]:bg-blue-600",children:[e.jsx(c,{className:"w-4 h-4 mr-2"})," Bags I've Carried"]})]}),e.jsx(f,{value:"sent",className:"mt-6",children:e.jsx(p,{shipments:a,type:"sent",isLoading:t})}),e.jsx(f,{value:"carrying",className:"mt-6",children:e.jsx(p,{shipments:s,type:"carrying",isLoading:r})})]});export{le as M};
