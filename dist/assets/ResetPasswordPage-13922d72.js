import{r as t,b as P,u as y,j as s,m as k,h as p,I as h,B as f}from"./index-90132984.js";import{s as w}from"./customSupabaseClient-6a2b5399.js";import{L as x}from"./label-10800e5f.js";import{C,b as S,c as E,d as L,a as R}from"./card-20bc08aa.js";import{E as T,a as F}from"./eye-dd65b377.js";const c=({show:a,onClick:d,ariaLabel:r})=>s.jsx(f,{type:"button",variant:"ghost",size:"icon",className:"absolute inset-y-0 right-0 h-full px-3 text-muted-foreground hover:bg-transparent focus:outline-none",onClick:d,"aria-label":r,children:a?s.jsx(T,{className:"w-5 h-5"}):s.jsx(F,{className:"w-5 h-5"})});c.displayName="PasswordToggle";const Y=()=>{const[a,d]=t.useState(""),[r,g]=t.useState(""),[m,u]=t.useState(!1),[o,b]=t.useState(!1),[i,j]=t.useState(!1),{toast:n}=P(),v=y();t.useEffect(()=>{const{data:{subscription:e}}=w.auth.onAuthStateChange((l,H)=>{});return()=>{e==null||e.unsubscribe()}},[]);const N=async e=>{if(e.preventDefault(),a!==r){n({title:"Passwords do not match",variant:"destructive"});return}if(a.length<6){n({title:"Password is too short",description:"Password should be at least 6 characters long.",variant:"destructive"});return}u(!0);const{error:l}=await w.auth.updateUser({password:a});u(!1),l?n({title:"Error",description:l.message||"Failed to reset password. The link may have expired.",variant:"destructive"}):(n({title:"Password Updated",description:"Your password has been successfully reset. Please sign in.",variant:"default",className:"bg-green-500 dark:bg-green-600 text-white"}),v("/signin"))};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 via-indigo-50 to-sky-50 dark:from-slate-900 dark:to-purple-900 p-4",children:s.jsx(k.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:s.jsxs(C,{className:"w-full max-w-md shadow-2xl glassmorphism-card",children:[s.jsxs(S,{className:"text-center",children:[s.jsx(E,{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-600 dark:from-secondary dark:to-orange-400",children:"Reset Your Password"}),s.jsx(L,{className:"text-muted-foreground pt-2",children:"Enter and confirm your new password below."})]}),s.jsx(R,{children:s.jsxs("form",{onSubmit:N,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(x,{htmlFor:"password",className:"flex items-center text-foreground dark:text-slate-200",children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"New Password"]}),s.jsxs("div",{className:"relative",children:[s.jsx(h,{id:"password",type:o?"text":"password",placeholder:"••••••••",value:a,onChange:e=>d(e.target.value),required:!0,className:"bg-background/60 dark:bg-slate-700/40 pr-10"}),s.jsx(c,{show:o,onClick:()=>b(!o),ariaLabel:o?"Hide password":"Show password"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(x,{htmlFor:"confirmPassword",className:"flex items-center text-foreground dark:text-slate-200",children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Confirm New Password"]}),s.jsxs("div",{className:"relative",children:[s.jsx(h,{id:"confirmPassword",type:i?"text":"password",placeholder:"••••••••",value:r,onChange:e=>g(e.target.value),required:!0,className:"bg-background/60 dark:bg-slate-700/40 pr-10"}),s.jsx(c,{show:i,onClick:()=>j(!i),ariaLabel:i?"Hide password":"Show password"})]})]}),s.jsx(f,{type:"submit",className:"w-full",disabled:m,children:m?"Resetting Password...":"Reset Password"})]})})]})})})};export{Y as default};
