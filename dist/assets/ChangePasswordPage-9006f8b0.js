import{c as h,r as f,b as g,u as b,j as s,m as y,B as n,I as l,z as j}from"./index-90132984.js";import{u as P}from"./index.esm-d4f1bdfa.js";import{s as N}from"./customSupabaseClient-6a2b5399.js";import{L as m}from"./label-10800e5f.js";import{C as v,b as k,c as C,d as L,a as S}from"./card-20bc08aa.js";import{A as q}from"./arrow-left-51d5f9cd.js";const E=h("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]),K=()=>{const{register:r,handleSubmit:p,formState:{errors:e},watch:w}=P(),[t,o]=f.useState(!1),{toast:d}=g(),i=b(),u=w("newPassword"),x=async a=>{o(!0);const{error:c}=await N.auth.updateUser({password:a.newPassword});o(!1),c?d({title:"Error Changing Password",description:c.message,variant:"destructive"}):(d({title:"Success!",description:"Your password has been changed successfully.",className:"bg-green-500 text-white"}),i("/dashboard?tab=settings"))};return s.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto flex items-center justify-center min-h-[calc(100vh-180px)] py-12 px-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs(n,{variant:"ghost",onClick:()=>i("/dashboard?tab=settings"),className:"mb-4",children:[s.jsx(q,{className:"mr-2 h-4 w-4"})," Back to Dashboard"]}),s.jsxs(v,{className:"shadow-2xl glassmorphism dark:bg-slate-800/60 dark:border-slate-700",children:[s.jsxs(k,{className:"text-center",children:[s.jsx("div",{className:"mx-auto bg-primary/10 dark:bg-purple-500/20 rounded-full p-3 w-fit mb-4",children:s.jsx(E,{className:"w-8 h-8 text-primary dark:text-purple-400"})}),s.jsx(C,{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-500 dark:from-purple-400 dark:to-sky-400",children:"Change Your Password"}),s.jsx(L,{className:"text-muted-foreground dark:text-slate-400 pt-2",children:"Enter a new secure password for your account."})]}),s.jsx(S,{children:s.jsxs("form",{onSubmit:p(x),className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"newPassword",children:"New Password"}),s.jsx(l,{id:"newPassword",type:"password",...r("newPassword",{required:"New password is required",minLength:{value:8,message:"Password must be at least 8 characters long"}}),className:e.newPassword?"border-destructive":""}),e.newPassword&&s.jsx("p",{className:"text-sm text-destructive",children:e.newPassword.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsx(l,{id:"confirmPassword",type:"password",...r("confirmPassword",{required:"Please confirm your new password",validate:a=>a===u||"The passwords do not match"}),className:e.confirmPassword?"border-destructive":""}),e.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:e.confirmPassword.message})]}),s.jsx(n,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 text-white",disabled:t,children:t?s.jsx(j,{}):"Update Password"})]})})]})]})})};export{K as default};
